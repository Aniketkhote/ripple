import { describe, it, expect, beforeEach, afterEach } from 'vitest';
import { mount, flushSync } from 'ripple';

describe('@use element decorators', () => {
  let container;

  function render(component) {
    mount(component, { target: container });
  }

  beforeEach(() => {
    container = document.createElement('div');
    document.body.appendChild(container);
  });

  afterEach(() => {
    document.body.removeChild(container);
    container = null;
  });

  it('capture a <div>', () => {
    let div;
    
    component Component() {
      <div {@use (node) => { div = node; }}>{"Hello World"}</div>
    }

    render(Component);

    expect(div.textContent).toBe('Hello World');
  });
});